@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* LIGHT MODE - Soft, airy, premium */
  :root {
    --background: 210 40% 98%;        /* Soft bluish white #f8fafc */
    --foreground: 222 47% 11%;        /* Deep slate #0f172a */

    --card: 0 0% 100%;                /* Pure white */
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    --primary: 160 84% 39%;           /* Emerald #10b981 */
    --primary-foreground: 0 0% 100%;

    --secondary: 210 40% 96%;         /* Very light blue-gray */
    --secondary-foreground: 222 47% 11%;

    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;  /* Slate-500 for muted text */

    --accent: 210 40% 96%;
    --accent-foreground: 222 47% 11%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 214 32% 91%;            /* Soft visible border */
    --input: 214 32% 91%;
    --ring: 160 84% 39%;              /* Emerald focus ring */

    --radius: 0.75rem;

    --chart-1: 160 84% 39%;
    --chart-2: 217 91% 60%;
    --chart-3: 142 76% 45%;
    --chart-4: 43 96% 56%;
    --chart-5: 340 75% 55%;
  }

  /* DARK MODE - Keep exactly as-is */
  .dark {
    --background: 0 0% 4%;            /* #0a0a0a */
    --foreground: 0 0% 98%;

    --card: 0 0% 7%;                  /* #121212 */
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 7%;
    --popover-foreground: 0 0% 98%;

    --primary: 160 84% 39%;           /* Emerald */
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 15%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 15%;
    --muted-foreground: 0 0% 64%;

    --accent: 0 0% 15%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62% 50%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 18%;
    --input: 0 0% 18%;
    --ring: 160 84% 39%;

    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* ===========================================
   LIGHT MODE CARD SHADOWS
   =========================================== */

/* Light mode card shadows - only apply when NOT in dark mode */
:root .card-elevated,
:root [data-elevated="true"] {
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
}

.dark .card-elevated,
.dark [data-elevated="true"] {
  box-shadow: none;
}

/* ===========================================
   DROPDOWN FIX - Make Select Dropdowns Visible
   =========================================== */

/* Force SelectContent to render on top of everything */
[data-radix-popper-content-wrapper] {
  z-index: 9999 !important;
}

/* Ensure SelectContent itself has high z-index */
[role="listbox"] {
  z-index: 9999 !important;
}

/* Fix for Dialog/Sheet dropdowns specifically */
[data-state="open"] [role="listbox"] {
  z-index: 9999 !important;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Image Crop Modal Slider */
input[type="range"].slider {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 8px;
  background: #3f3f46;
  outline: none;
  border-radius: 4px;
}

input[type="range"].slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  background: #10b981;
  cursor: pointer;
  border-radius: 50%;
}

input[type="range"].slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: #10b981;
  cursor: pointer;
  border-radius: 50%;
  border: none;
}

input[type="range"].slider:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

input[type="range"].slider:disabled::-webkit-slider-thumb {
  cursor: not-allowed;
}

input[type="range"].slider:disabled::-moz-range-thumb {
  cursor: not-allowed;
}

/* ========================================
   NUCLEAR LIGHT MODE OVERRIDES
   Forces theme colors over hardcoded dark classes
   ======================================== */

/* Only apply these overrides in light mode (when .dark is NOT present) */
html:not(.dark) {
  /* ===== BACKGROUND OVERRIDES ===== */

  /* Override all dark backgrounds to use theme */
  .bg-black,
  .bg-\[\#0a0a0a\],
  .bg-\[\#0f0f0f\],
  .bg-\[\#111\],
  .bg-\[\#121212\],
  .bg-\[\#171717\],
  .bg-\[\#1a1a1a\],
  .bg-\[\#1e1e1e\],
  .bg-zinc-950,
  .bg-zinc-900,
  .bg-neutral-950,
  .bg-neutral-900,
  .bg-slate-950,
  .bg-slate-900,
  .bg-gray-950,
  .bg-gray-900 {
    background-color: hsl(var(--background)) !important;
  }

  /* Secondary/card backgrounds */
  .bg-zinc-800,
  .bg-zinc-800\/50,
  .bg-zinc-800\/80,
  .bg-neutral-800,
  .bg-slate-800,
  .bg-gray-800,
  .bg-\[\#262626\],
  .bg-\[\#1f1f1f\],
  .bg-\[\#1F1F1F\],
  .bg-\[\#252525\] {
    background-color: hsl(var(--card)) !important;
  }

  /* Muted/hover backgrounds */
  .bg-zinc-700,
  .bg-zinc-700\/50,
  .bg-neutral-700,
  .bg-slate-700,
  .bg-gray-700,
  .bg-gray-600,
  .bg-gray-500 {
    background-color: hsl(var(--muted)) !important;
  }

  /* Fix that ugly dark header */
  .bg-\[\#1e3a5f\],
  .bg-\[\#1a365d\],
  .bg-\[\#0f2744\],
  .bg-blue-900,
  .bg-blue-950 {
    background-color: hsl(var(--card)) !important;
  }

  /* ===== BORDER OVERRIDES ===== */

  .border-zinc-800,
  .border-zinc-700,
  .border-zinc-600,
  .border-neutral-800,
  .border-neutral-700,
  .border-slate-800,
  .border-slate-700,
  .border-gray-800,
  .border-gray-700,
  .border-\[\#2e2e2e\],
  .border-\[\#2A2A2A\],
  .border-\[\#333\],
  .border-\[\#3f3f3f\] {
    border-color: hsl(var(--border)) !important;
  }

  /* ===== TEXT OVERRIDES ===== */

  /* White text -> dark text */
  .text-white {
    color: hsl(var(--foreground)) !important;
  }

  /* Light gray text -> foreground */
  .text-zinc-100,
  .text-zinc-200,
  .text-zinc-300,
  .text-neutral-100,
  .text-neutral-200,
  .text-neutral-300,
  .text-slate-100,
  .text-slate-200,
  .text-slate-300,
  .text-gray-100,
  .text-gray-200,
  .text-gray-300 {
    color: hsl(var(--foreground)) !important;
  }

  /* Medium gray text -> muted-foreground */
  .text-zinc-400,
  .text-zinc-500,
  .text-zinc-600,
  .text-neutral-400,
  .text-neutral-500,
  .text-slate-400,
  .text-slate-500,
  .text-gray-400,
  .text-gray-500 {
    color: hsl(var(--muted-foreground)) !important;
  }

  /* ===== DIVIDE/SEPARATOR OVERRIDES ===== */

  .divide-zinc-800 > :not([hidden]) ~ :not([hidden]),
  .divide-zinc-700 > :not([hidden]) ~ :not([hidden]),
  .divide-neutral-800 > :not([hidden]) ~ :not([hidden]),
  .divide-slate-800 > :not([hidden]) ~ :not([hidden]),
  .divide-gray-800 > :not([hidden]) ~ :not([hidden]) {
    border-color: hsl(var(--border)) !important;
  }

  /* ===== HOVER STATE OVERRIDES ===== */

  .hover\:bg-zinc-800:hover,
  .hover\:bg-zinc-700:hover,
  .hover\:bg-neutral-800:hover,
  .hover\:bg-slate-800:hover,
  .hover\:bg-gray-800:hover {
    background-color: hsl(var(--muted)) !important;
  }

  .hover\:text-white:hover {
    color: hsl(var(--foreground)) !important;
  }

  /* ===== RING/FOCUS OVERRIDES ===== */

  .ring-zinc-800,
  .ring-zinc-700,
  .focus\:ring-zinc-800:focus,
  .focus\:ring-zinc-700:focus {
    --tw-ring-color: hsl(var(--ring)) !important;
  }

  /* ===== SPECIAL COMPONENT FIXES ===== */

  /* Calendar grid cells */
  [class*="calendar"] .bg-zinc-900,
  [class*="calendar"] .bg-zinc-800,
  [class*="Calendar"] .bg-zinc-900,
  [class*="Calendar"] .bg-zinc-800 {
    background-color: hsl(var(--card)) !important;
  }

  /* Table headers */
  thead.bg-zinc-800,
  thead.bg-zinc-900,
  thead .bg-zinc-800,
  thead .bg-zinc-900,
  th.bg-zinc-800,
  th.bg-zinc-900 {
    background-color: hsl(var(--muted)) !important;
  }

  /* Cards should have shadows in light mode */
  .rounded-xl.border,
  .rounded-lg.border,
  [class*="card"],
  [class*="Card"] {
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  }

  /* Fix inputs */
  input:not([type="range"]):not([type="checkbox"]):not([type="radio"]),
  textarea,
  select {
    background-color: hsl(var(--background)) !important;
    border-color: hsl(var(--border)) !important;
    color: hsl(var(--foreground)) !important;
  }

  input::placeholder,
  textarea::placeholder {
    color: hsl(var(--muted-foreground)) !important;
  }

  /* Fix dropdowns/popovers */
  [data-radix-popper-content-wrapper] > div,
  [role="menu"],
  [role="listbox"],
  .dropdown-content,
  .popover-content {
    background-color: hsl(var(--card)) !important;
    border-color: hsl(var(--border)) !important;
  }

  /* Fix modals/dialogs */
  [role="dialog"],
  .dialog-content,
  .modal-content {
    background-color: hsl(var(--card)) !important;
    border-color: hsl(var(--border)) !important;
  }

  /* Fix shadcn dialog specifically */
  [data-state="open"][role="dialog"],
  [data-radix-dialog-content] {
    background-color: hsl(var(--card)) !important;
  }

  /* Fix shadcn sheet */
  [data-radix-sheet-content] {
    background-color: hsl(var(--card)) !important;
  }
}

/* ===== PRESERVE INTENTIONAL DARK ELEMENTS ===== */
/* These should stay dark even in light mode */

html:not(.dark) {
  /* Keep primary button colors */
  .bg-primary,
  .bg-emerald-500,
  .bg-emerald-600 {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }

  .text-primary-foreground {
    color: hsl(var(--primary-foreground)) !important;
  }

  /* Keep status badge colors */
  .bg-emerald-500\/20,
  .bg-emerald-100 {
    background-color: rgb(16 185 129 / 0.1) !important;
  }

  .bg-red-500\/20,
  .bg-red-100 {
    background-color: rgb(239 68 68 / 0.1) !important;
  }

  .bg-amber-500\/20,
  .bg-amber-100,
  .bg-yellow-500\/20,
  .bg-yellow-100 {
    background-color: rgb(245 158 11 / 0.1) !important;
  }

  .bg-blue-500\/20,
  .bg-blue-100 {
    background-color: rgb(59 130 246 / 0.1) !important;
  }

  /* Keep colored text for badges */
  .text-emerald-400,
  .text-emerald-500,
  .text-emerald-600 {
    color: rgb(16 185 129) !important;
  }

  .text-red-400,
  .text-red-500 {
    color: rgb(239 68 68) !important;
  }

  .text-amber-400,
  .text-amber-500,
  .text-yellow-400,
  .text-yellow-500 {
    color: rgb(245 158 11) !important;
  }

  .text-blue-400,
  .text-blue-500 {
    color: rgb(59 130 246) !important;
  }
}
